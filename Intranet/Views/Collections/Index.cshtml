@model IEnumerable<Database.DATA.BookScheme.Collections>

@{
    ViewData["Title"] = "Index";
}

<h1 class="text-center intranet-headers rounded-3 bg-light shadow-lg mb-3">Lista kolekcji</h1>

<div class="modal fade" id="addGenreModal" tabindex="-1" aria-labelledby="addGenreModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post" asp-controller="Genre" asp-action="Create">
                <div class="modal-header bg-dark">
                    <h1 class="modal-title fs-5 text-white" id="exampleModalLabel">Nowy gatunek</h1>
                    <button type="button" class="btn-close-white text-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="form-group">
                        <label>Nazwa dla nowego gatunku:</label>
                        <input type="text" class="form-control" required="required" name="Name" placeholder="np. Thriller"/>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle-fill"></i> Zamknij</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-plus-circle-fill"></i>
                    </button>
                </div>
            </form>
        </div>

    </div>
</div>

<div class="modal fade" id="editGenreModal" tabindex="-1" aria-labelledby="editGenreModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post" asp-controller="Genre" asp-action="Edit" id="editGenreForm">
                <div class="modal-header bg-dark">
                    <h1 class="modal-title fs-5 text-white" id="editGenreModalLabel">Edytuj nazwę gatunku</h1>
                    <button type="button" class="btn-close-white text-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input type="hidden" id="inputGenreId"/>
                    <div class="form-group">
                        <label>Jaka nową nazwę ma mieć gatunek:</label>
                        <input name="Name" class="form-control" id="inputNameGenre"/>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle-fill"></i> Zamknij</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-save"></i>
                    </button>
                </div>

            </form>
        </div>

    </div>
</div>




<table class="table table-striped table-light table-hover shadow rounded">
    <thead class="table-dark">
        <tr>
            <th>@Html.DisplayNameFor(model => model.CollectionName)</th>
            <th class="text-center">Zarzadzanie</th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
    <tr>
         <td>
                        @Html.DisplayFor(modelItem => item.CollectionName)
                    </td>
                   
        <td class="text-center">
            <a data-bs-toggle="modal" data-bs-target="#editGenreModal" data-genre-id="@item.CollectionId" data-genre-name="@item.CollectionName" class="mx-2 editGenreButton"><i class="bi bi-pencil-square"></i> Edytuj</a>
            <a asp-action="Delete" asp-route-id="@item.CollectionId" class="mx-2"><i class="bi bi-trash"></i> Usuń</a>
        </td>
    </tr>
}

<tr>
    <td colspan="2" class="text-center">
        <a href="#" data-bs-toggle="modal" data-bs-target="#addGenreModal" class="btn btn-outline-primary">
            Dodaj nową kolekcje</a>
    </td>
</tr>
</tbody>
</table>
@*<a asp-controller="HomeBook" asp-action="Index" class="btn btn-outline-dark mt-5"><i class="bi bi-arrow-bar-left"> Powrót</i></a>*@

@* ToDo: Zmiana nazw oraz placeholder *@

<script>
   
    var editGenreModal = document.getElementById("editGenreModal");
    var inputNameGenre = document.getElementById("inputNameGenre");
    
    var inputGenreId = document.getElementById("inputGenreId");
    
    let editGenreButton = document.getElementsByClassName("editGenreButton");    
    
    var editGenreForm = document.getElementById("editGenreForm");
   
    
    for (let i = 0; i < editGenreButton.length; i++)
    {
        editGenreButton[i].addEventListener('click',()=>
        {
          inputGenreId.value = editGenreButton[i].getAttribute("data-genre-id");      
          inputNameGenre.value = editGenreButton[i].getAttribute("data-genre-name");   
        });
    }
        
</script>